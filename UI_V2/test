def guardar_nueva_fase():
    print("ğŸ” Iniciando guardado de nueva fase...")  # â† DepuraciÃ³n
    
    fase_nombre = entry_fase.get().strip()
    if not fase_nombre:
        print("âŒ Error: Nombre de fase vacÃ­o")
        entry_fase.configure(border_color="red")
        form_fase.after(2000, lambda: entry_fase.configure(border_color="#565B5E"))
        return

    desc_text = txt_desc.get("1.0", "end-1c").strip()
    if hasattr(txt_desc, "has_placeholder") and txt_desc.has_placeholder:
        desc_text = ""

    print(f"ğŸ“ Datos a guardar: {fase_nombre}, {desc_text}, {entry_ini.get()}, {entry_fin.get()}")  # â† DepuraciÃ³n

    try:
        conn = sqlite3.connect("desarrollos.db")
        cursor = conn.cursor()
        cursor.execute("""
            INSERT INTO FASES (ID_DESARROLLO, FASE, DESCRIPCION, FECHA_INICIO, FECHA_FIN, COMENTARIOS, ESTATUS)
            VALUES (?, ?, ?, ?, ?, ?, ?)
        """, (
            id_desarrollo,
            fase_nombre,
            desc_text,
            entry_ini.get(),
            entry_fin.get(),
            entry_com.get(),
            combo_estatus.get()
        ))
        conn.commit()
        conn.close()
        print("âœ… Fase guardada exitosamente")  # â† DepuraciÃ³n
        
        form_fase.destroy()
        top.destroy()
        open_detalle_window(parent, id_desarrollo)
        
    except Exception as e:
        print(f"âŒ Error al guardar: {e}")  # â† Â¡Esto es clave!
