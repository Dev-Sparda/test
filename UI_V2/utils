# utils.py
import customtkinter as ctk

def create_textbox_with_placeholder(parent, placeholder_text, width=300, height=60):
    textbox = ctk.CTkTextbox(parent, width=width, height=height)
    textbox.insert("1.0", placeholder_text)
    textbox.placeholder = placeholder_text
    textbox.has_placeholder = True
    textbox.configure(text_color="gray")

    def on_click(event):
        if textbox.has_placeholder:
            textbox.delete("1.0", "end")
            textbox.has_placeholder = False
            textbox.configure(text_color="white")

    def on_focus_out(event):
        if not textbox.get("1.0", "end-1c").strip():
            textbox.insert("1.0", placeholder_text)
            textbox.has_placeholder = True
            textbox.configure(text_color="gray")

    def on_key(event):
        if textbox.has_placeholder:
            textbox.delete("1.0", "end")
            textbox.has_placeholder = False
            textbox.configure(text_color="white")

    textbox.bind("<Button-1>", on_click)
    textbox.bind("<FocusOut>", on_focus_out)
    textbox.bind("<Key>", on_key)
    return textbox
